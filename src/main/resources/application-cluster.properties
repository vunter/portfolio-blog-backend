# ==================== CLUSTER PROFILE ====================
# Runs on default-server (192.168.1.214) via Docker Compose
# PostgreSQL on rpi5 K3s (192.168.1.235:30432), Redis on Docker network

# Disable Vault (ReactiveSessionManagerAdapter hangs with Spring Boot 4.0.2)
spring.cloud.vault.enabled=false
spring.config.import=

# Disable Docker Compose integration
spring.docker.compose.enabled=false

# Allow bean overriding
spring.main.allow-bean-definition-overriding=true

# Database — PostgreSQL on rpi5 K3s NodePort
spring.r2dbc.url=r2dbc:postgresql://192.168.1.235:30432/blog
spring.r2dbc.username=postgres
spring.r2dbc.password=${DATABASE_PASSWORD:Marloi03}

# Schema already applied
app.schema.init=false

# Redis — Docker network alias 'redis' (blog-redis container)
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:redis}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD:RhH5YEBDqEnQ5qxZKn3yPyNX3tHJlP99}
spring.cache.type=redis

# Exclude Sentry (incompatible with Spring Boot 4.0.2)
spring.autoconfigure.exclude=io.sentry.spring.boot.jakarta.SentryAutoConfiguration

# JWT
jwt.secret=${JWT_SECRET:kNOxwPyX4URx7WzdImufoH2XW69KibHeNee2aHGunaBoFovghyNjAjmFrS0/4w8yAB}
jwt.cookie.secure=false
jwt.cookie.domain=

# PostgreSQL Full-Text Search
app.search.use-fts=true

# Logging
logging.level.root=INFO
logging.level.dev.catananti=INFO
logging.level.dev.catananti.controller=DEBUG
logging.level.dev.catananti.service=DEBUG
logging.level.io.netty.util.ResourceLeakDetector=OFF

# CORS — allow frontend via nginx on port 80
cors.allowed-origins=http://192.168.1.214,http://localhost,http://default-server

# Scheduling
scheduling.refresh-token-cleanup-ms=3600000
scheduling.password-reset-cleanup-ms=21600000
scheduling.metrics-update-ms=60000
app.scheduler.article-publish-rate=60000
cache.warming.refresh-rate-ms=300000
cache.warming.enabled=true

# Swagger UI
springdoc.swagger-ui.enabled=true

# CSRF
security.csrf.enabled=false

# Actuator
management.endpoints.web.exposure.include=health,info,metrics,prometheus,env,loggers
management.endpoint.health.show-details=always
management.endpoint.health.group.readiness.include=readinessState,db,redis
management.health.mail.enabled=false

# Admin credentials
admin.email=${ADMIN_EMAIL:admin@catananti.dev}
admin.password=${ADMIN_PASSWORD:Admin123456789!}
admin.name=${ADMIN_NAME:Leonardo Catananti}
admin.user.initialization.enabled=true

# Contact form
app.contact.notification-email=${CONTACT_NOTIFICATION_EMAIL:dev@localhost}

# DeepL
deepl.api-key=${DEEPL_API_KEY:}

# Datadog
management.datadog.metrics.export.enabled=${DD_METRICS_ENABLED:true}
management.datadog.metrics.export.api-key=${DD_API_KEY:}
management.datadog.metrics.export.uri=${DD_METRICS_URI:https://api.us5.datadoghq.com}
management.datadog.metrics.export.step=30s

# Site URL
app.site-url=http://192.168.1.214
