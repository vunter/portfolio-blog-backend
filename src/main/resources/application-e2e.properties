# ==================== E2E TEST PROFILE ====================
# Uses PostgreSQL on rpi5 cluster (192.168.1.235:5432)
# No Redis required - uses simple caching

# Disable Docker Compose integration
spring.docker.compose.enabled=false

# Disable Vault
spring.cloud.vault.enabled=false
spring.config.import=

# Allow bean overriding
spring.main.allow-bean-definition-overriding=true

# Database â€” PostgreSQL on rpi5 cluster
spring.r2dbc.url=r2dbc:postgresql://192.168.1.235:5432/blog
spring.r2dbc.username=postgres
spring.r2dbc.password=postgres

# Initialize schema manually via psql (R2DBC can't parse DO $$ blocks)
app.schema.init=false

# Disable Redis and use simple caching
spring.cache.type=simple
spring.autoconfigure.exclude=org.springframework.boot.data.redis.autoconfigure.DataRedisAutoConfiguration,org.springframework.boot.data.redis.autoconfigure.DataRedisReactiveAutoConfiguration,org.springframework.boot.data.redis.autoconfigure.DataRedisRepositoriesAutoConfiguration,org.springframework.boot.mail.autoconfigure.MailHealthContributorAutoConfiguration,io.sentry.spring.boot.jakarta.SentryAutoConfiguration

# Disable mail health indicator
management.health.mail.enabled=false

# Disable Redis health indicator (no Redis in e2e)
management.health.redis.enabled=false

# Enable admin user initialization for E2E testing
admin.user.initialization.enabled=true

# JWT Secret for E2E testing
jwt.secret=e2e-test-secret-key-for-testing-only-do-not-use-in-production-min-32-chars
jwt.cookie.secure=false
jwt.cookie.domain=

# PostgreSQL Full-Text Search enabled
app.search.use-fts=true

# Logging
logging.level.root=INFO
logging.level.dev.catananti=DEBUG
logging.level.io.netty.util.ResourceLeakDetector=OFF
logging.file.name=target/app.log

# CORS
cors.allowed-origins=http://localhost:4200,http://127.0.0.1:4200

# Disable heavy scheduled tasks
scheduling.refresh-token-cleanup-ms=3600000
scheduling.password-reset-cleanup-ms=21600000
scheduling.metrics-update-ms=300000
app.scheduler.article-publish-rate=300000
cache.warming.refresh-rate-ms=300000
cache.warming.enabled=false

# Enable Swagger UI
springdoc.swagger-ui.enabled=true

# Disable CSRF for testing
security.csrf.enabled=false

# Actuator
management.endpoints.web.exposure.include=health,info,metrics,prometheus,env,loggers
management.endpoint.health.show-details=always
management.endpoint.health.group.readiness.include=readinessState,db

# Admin credentials for E2E tests (must match e2e/helpers.ts ADMIN_CREDS)
admin.email=admin@catananti.dev
admin.password=Admin123456789!
admin.name=Leonardo Catananti

# DevDataInitializer admin password (must match E2E test helpers)
dev.admin.password=Admin123456789!

# Contact form
app.contact.notification-email=dev@localhost

# DeepL Translation API
deepl.api-key=${DEEPL_API_KEY:}

# Enable Datadog metrics
management.datadog.metrics.export.enabled=${DD_METRICS_ENABLED:true}
management.metrics.export.datadog.enabled=${DD_METRICS_ENABLED:true}
